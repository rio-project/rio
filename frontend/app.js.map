{"version":3,"sources":["text.ts","row.ts","column.ts","rectangle.ts","stack.ts","margin.ts","align.ts","mouseEventListener.ts","textInput.ts","override.ts","app.ts"],"names":[],"mappings":"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","file":"app.js","sourceRoot":"","sourcesContent":["import { JsonText } from './models';\nimport { colorToCss } from './app';\n\nexport class TextWidget {\n    static build(data: JsonText): HTMLElement {\n        let element = document.createElement('div');\n        element.classList.add('reflex-text');\n        return element;\n    }\n\n    static update(element: HTMLElement, deltaState: JsonText): void {\n        if (deltaState.text !== undefined) {\n            element.innerText = deltaState.text;\n        }\n\n        if (deltaState.multiline !== undefined) {\n            element.style.whiteSpace = deltaState.multiline\n                ? 'normal'\n                : 'nowrap';\n        }\n\n        if (deltaState.font !== undefined) {\n            element.style.fontFamily = deltaState.font;\n        }\n\n        if (deltaState.font_color !== undefined) {\n            element.style.color = colorToCss(deltaState.font_color);\n        }\n\n        if (deltaState.font_size !== undefined) {\n            element.style.fontSize = deltaState.font_size + 'em';\n        }\n\n        if (deltaState.font_weight !== undefined) {\n            element.style.fontWeight = deltaState.font_weight;\n        }\n\n        if (deltaState.italic !== undefined) {\n            element.style.fontStyle = deltaState.italic ? 'italic' : 'normal';\n        }\n\n        if (deltaState.underlined !== undefined) {\n            element.style.textDecoration = deltaState.underlined\n                ? 'underline'\n                : 'none';\n        }\n    }\n}\n","import { buildWidget } from './app';\nimport { JsonRow } from './models';\n\nexport class RowWidget {\n    static build(data: JsonRow): HTMLElement {\n        let element = document.createElement('div');\n        element.classList.add('reflex-row');\n\n        for (const child of data.children) {\n            element.appendChild(buildWidget(child));\n        }\n\n        return element;\n    }\n\n    static update(element: HTMLElement, deltaState: JsonRow): void {}\n}\n","import { buildWidget } from './app';\nimport { JsonColumn } from './models';\n\nexport class ColumnWidget {\n    static build(data: JsonColumn): HTMLElement {\n        let element = document.createElement('div');\n        element.classList.add('reflex-column');\n\n        for (const child of data.children) {\n            element.appendChild(buildWidget(child));\n        }\n\n        return element;\n    }\n\n    static update(element: HTMLElement, deltaState: JsonColumn): void {}\n}\n","import { buildWidget, fillToCss } from './app';\nimport { JsonRectangle } from './models';\n\nexport class RectangleWidget {\n    static build(data: JsonRectangle): HTMLElement {\n        let element = document.createElement('div');\n        element.classList.add('reflex-rectangle');\n\n        if (data.child !== undefined && data.child !== null) {\n            element.appendChild(buildWidget(data.child));\n        }\n\n        return element;\n    }\n\n    static update(element: HTMLElement, deltaState: JsonRectangle): void {\n        if (deltaState.fill !== undefined) {\n            element.style.background = fillToCss(deltaState.fill);\n        }\n\n        if (deltaState.corner_radius !== undefined) {\n            const [topLeft, topRight, bottomRight, bottomLeft] =\n                deltaState.corner_radius;\n            element.style.borderRadius = `${topLeft}em ${topRight}em ${bottomRight}em ${bottomLeft}em`;\n        }\n    }\n}\n","import { buildWidget } from './app';\nimport { JsonStack } from './models';\n\nexport class StackWidget {\n    static build(data: JsonStack): HTMLElement {\n        let element = document.createElement('div');\n        element.classList.add('reflex-stack');\n\n        for (let ii = 0; ii < data.children.length; ii++) {\n            const childElement = buildWidget(data.children[ii]);\n            childElement.style.zIndex = `${ii + 1}`;\n            element.appendChild(childElement);\n        }\n\n        return element;\n    }\n\n    static update(element: HTMLElement, deltaState: JsonStack): void {}\n}\n","import { buildWidget } from './app';\nimport { JsonMargin } from './models';\n\nexport class MarginWidget {\n    static build(widget: JsonMargin): HTMLElement {\n        let element = document.createElement('div');\n        element.appendChild(buildWidget(widget.child));\n        return element;\n    }\n\n    static update(element: HTMLElement, state: JsonMargin): void {\n        if (state.margin_left !== undefined) {\n            element.style.marginLeft = `${state.margin_left}em`;\n        }\n\n        if (state.margin_top !== undefined) {\n            element.style.marginTop = `${state.margin_top}em`;\n        }\n\n        if (state.margin_right !== undefined) {\n            element.style.marginRight = `${state.margin_right}em`;\n        }\n\n        if (state.margin_bottom !== undefined) {\n            element.style.marginBottom = `${state.margin_bottom}em`;\n        }\n    }\n}\n","import { buildWidget } from './app';\nimport { JsonAlign } from './models';\n\nexport class AlignWidget {\n    static build(data: JsonAlign): HTMLElement {\n        let element = document.createElement('div');\n        element.classList.add('reflex-align');\n        element.appendChild(buildWidget(data.child));\n        return element;\n    }\n\n    static update(element: HTMLElement, state: JsonAlign): void {\n        let transform_x;\n        if (state.align_x !== undefined) {\n            if (state.align_x === null) {\n                element.style.left = 'unset';\n                transform_x = '0%';\n            } else {\n                element.style.left = `${state.align_x * 100}%`;\n                transform_x = `${state.align_x * -100}%`;\n            }\n        }\n\n        let transform_y;\n        if (state.align_y !== undefined) {\n            if (state.align_y === null) {\n                element.style.top = 'unset';\n                transform_y = '0%';\n            } else {\n                element.style.top = `${state.align_y * 100}%`;\n                transform_y = `${state.align_y * -100}%`;\n            }\n        }\n\n        element.style.transform = `translate(${transform_x}, ${transform_y})`;\n    }\n}\n","import { JsonMouseEventListener } from './models';\nimport { buildWidget, pixelsPerEm, sendEvent } from './app';\n\nfunction eventMouseButtonToString(event: any): object {\n    return {\n        button: ['left', 'middle', 'right'][event.button],\n    };\n}\n\nfunction eventMousePositionToString(event: any): object {\n    return {\n        x: event.clientX / pixelsPerEm,\n        y: event.clientY / pixelsPerEm,\n    };\n}\n\nexport class MouseEventListener {\n    static build(data: JsonMouseEventListener): HTMLElement {\n        let element = document.createElement('div');\n        element.classList.add('reflex-mouse-event-listener');\n        element.appendChild(buildWidget(data.child));\n        return element;\n    }\n\n    static update(\n        element: HTMLElement,\n        deltaState: JsonMouseEventListener\n    ): void {\n        if (deltaState.reportMouseDown) {\n            element.onmousedown = (e) => {\n                sendEvent(element, 'mouseDownEvent', {\n                    ...eventMouseButtonToString(e),\n                    ...eventMousePositionToString(e),\n                });\n            };\n        } else {\n            element.onmousedown = null;\n        }\n\n        if (deltaState.reportMouseUp) {\n            element.onmouseup = (e) => {\n                sendEvent(element, 'mouseUpEvent', {\n                    ...eventMouseButtonToString(e),\n                    ...eventMousePositionToString(e),\n                });\n            };\n        } else {\n            element.onmouseup = null;\n        }\n\n        // TODO\n    }\n}\n","import { JsonMouseEventListener, JsonTextInput } from './models';\nimport { buildWidget, pixelsPerEm, sendEvent } from './app';\n\nexport class TextInputWidget {\n    static build(data: JsonTextInput): HTMLElement {\n        let element = document.createElement('input');\n        element.classList.add('reflex-text-input');\n\n        element.addEventListener('blur', () => {\n            sendEvent(element, 'textInputBlurEvent', {\n                text: element.value,\n            });\n        });\n\n        return element;\n    }\n\n    static update(element: HTMLElement, deltaState: JsonTextInput): void {\n        let cast_element = element as HTMLInputElement;\n\n        if (deltaState.secret !== undefined) {\n            cast_element.type = deltaState.secret ? 'password' : 'text';\n        }\n\n        if (deltaState.text !== undefined) {\n            cast_element.value = deltaState.text;\n        }\n\n        if (deltaState.placeholder !== undefined) {\n            cast_element.placeholder = deltaState.placeholder;\n        }\n    }\n}\n","import { buildWidget } from './app';\nimport { JsonOverride } from './models';\n\nexport class OverrideWidget {\n    static build(data: JsonOverride): HTMLElement {\n        let element = document.createElement('div');\n        element.appendChild(buildWidget(data.child));\n        return element;\n    }\n\n    static update(element: HTMLElement, deltaState: JsonOverride): void {\n\n        if (deltaState.width !== undefined) {\n            if (deltaState.width === null) {\n                element.style.removeProperty('width');\n            } else {\n                element.style.width = `${deltaState.width}em`;\n            }\n        }\n\n        if (deltaState.height !== undefined) {\n            if (deltaState.height === null) {\n                element.style.removeProperty('height');\n            } else {\n                element.style.height = `${deltaState.height}em`;\n            }\n        }\n    }\n}\n","import { TextWidget } from './text';\nimport { RowWidget } from './row';\nimport { ColumnWidget } from './column';\nimport { RectangleWidget } from './rectangle';\nimport { StackWidget } from './stack';\nimport { MarginWidget } from './margin';\nimport { AlignWidget } from './align';\nimport { Color, Fill, JsonWidget } from './models';\nimport { MouseEventListener } from './mouseEventListener';\nimport { TextInputWidget } from './textInput';\nimport { OverrideWidget } from './override';\n\nconst sessionToken = '{session_token}';\nconst initialMessages = '{initial_messages}';\n\nvar socket: WebSocket | null = null;\nexport var pixelsPerEm = 16;\n\nexport function colorToCss(color: Color): string {\n    const [r, g, b, a] = color;\n    return `rgba(${r * 255}, ${g * 255}, ${b * 255}, ${a})`;\n}\n\nexport function fillToCss(fill: Fill): string {\n    // Solid Color\n    if (fill.type === 'solid') {\n        return colorToCss(fill.color);\n    }\n\n    // Linear Gradient\n    if (fill.type === 'linearGradient') {\n        if (fill.stops.length == 1) {\n            return colorToCss(fill.stops[0][0]);\n        }\n\n        let stopStrings: string[] = [];\n        for (let i = 0; i < fill.stops.length; i++) {\n            let color = fill.stops[i][0];\n            let position = fill.stops[i][1];\n            stopStrings.push(`${colorToCss(color)} ${position * 100}%`);\n        }\n\n        return `linear-gradient(${fill.angleDegrees}deg, ${stopStrings.join(\n            ', '\n        )})`;\n    }\n\n    // Invalid fill type\n    throw `Invalid fill type: ${fill}`;\n}\n\nconst widgetClasses = {\n    align: AlignWidget,\n    column: ColumnWidget,\n    margin: MarginWidget,\n    rectangle: RectangleWidget,\n    row: RowWidget,\n    stack: StackWidget,\n    text: TextWidget,\n    mouseEventListener: MouseEventListener,\n    textInput: TextInputWidget,\n    override: OverrideWidget,\n};\n\nexport function buildWidget(widget: JsonWidget): HTMLElement {\n    // Get the class for this widget\n    const widgetClass = widgetClasses[widget.type];\n\n    // Make sure the widget type is valid (Just helpful for debugging)\n    if (!widgetClass) {\n        throw `Encountered unknown widget type: ${widget.type}`;\n    }\n\n    // Build the widget\n    const result = widgetClass.build(widget as any);\n\n    // Add a unique ID to the widget\n    result.id = 'reflex-id-' + widget.id;\n\n    // Add the common css class to the widget\n    result.classList.add('reflex-widget');\n\n    // Store the widget's type in the element. This is used by the update\n    // function to determine the correct update function to call.\n    result.setAttribute('data-reflex-type', widget.type);\n\n    // Update the widget to match its state\n    widgetClass.update(result, widget as any);\n\n    return result;\n}\n\nfunction processMessage(message: any) {\n    if (message.type == 'replaceWidgets') {\n        // Clear any previous widgets\n        let body = document.getElementsByTagName('body')[0];\n        body.innerHTML = '';\n\n        // Build the HTML document\n        body.appendChild(buildWidget(message.widget));\n    } else {\n        throw `Encountered unknown message type: ${message}`;\n    }\n}\n\nfunction main() {\n    // Determine the browser's font size\n    var measure = document.createElement('div');\n    measure.style.height = '10em';\n    document.body.appendChild(measure);\n    pixelsPerEm = measure.offsetHeight / 10;\n    document.body.removeChild(measure);\n\n    // Process initial messages\n    console.log(`Processing ${initialMessages.length} initial message(s)`);\n    for (let message of initialMessages) {\n        processMessage(message);\n    }\n\n    // Connect to the websocket\n    var url = new URL(`/ws?sessionToken=${sessionToken}`, window.location.href);\n    url.protocol = url.protocol.replace('http', 'ws');\n    console.log(`Connecting websocket to ${url.href}`);\n    socket = new WebSocket(url.href);\n\n    socket.addEventListener('open', onOpen);\n    socket.addEventListener('message', onMessage);\n    socket.addEventListener('error', onError);\n    socket.addEventListener('close', onClose);\n}\n\nfunction onOpen() {\n    console.log('Connection opened');\n}\n\nfunction onMessage(event: any) {\n    // Parse the message JSON\n    let message = JSON.parse(event.data);\n\n    // Handle it\n    processMessage(message);\n}\n\nfunction onError(event: any) {\n    console.log(`Error: ${event.message}`);\n}\n\nfunction onClose(event: any) {\n    console.log(`Connection closed: ${event.reason}`);\n}\n\nexport function sendJson(message: object) {\n    if (!socket) {\n        console.log(\n            `Attempted to send message, but the websocket is not connected: ${message}`\n        );\n        return;\n    }\n\n    socket.send(JSON.stringify(message));\n}\n\nexport function sendEvent(\n    element: HTMLElement,\n    eventType: string,\n    eventArgs: object\n) {\n    sendJson({\n        type: eventType,\n        // Remove the leading `reflex-id-` from the element's ID\n        widgetId: parseInt(element.id.substring(10)),\n        ...eventArgs,\n    });\n}\n\nmain();\n"]}