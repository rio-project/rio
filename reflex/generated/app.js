parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"DUgK":[function(require,module,exports) {
"use strict";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++)for(var o in t=arguments[s])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.WidgetBase=void 0;var t=require("./app"),s=function(){function s(e,t){this.elementId=e,this.state=t,this.layoutCssProperties={}}return Object.defineProperty(s.prototype,"element",{get:function(){var e=document.getElementById(this.elementId);if(null===e)throw new Error("Instance for element with id ".concat(this.elementId," cannot find its element"));return e},enumerable:!1,configurable:!0}),s.prototype.updateChildLayouts=function(){},s.prototype.replaceLayoutCssProperties=function(e){for(var t in this.layoutCssProperties)t in e||this.element.style.removeProperty(t);for(var t in e)this.element.style.setProperty(t,e[t]);this.layoutCssProperties=e},s.prototype.sendMessageToBackend=function(e){(0,t.sendMessageOverWebsocket)({type:"widgetMessage",widgetId:parseInt(this.elementId.substring(10)),payload:e})},s.prototype._setStateDontNotifyBackend=function(t){this.state=e(e({},this.state),t),this.updateElement(this.element,t)},s.prototype.setStateAndNotifyBackend=function(e){this._setStateDontNotifyBackend(e),(0,t.sendMessageOverWebsocket)({type:"widgetStateUpdate",widgetId:parseInt(this.elementId.substring(10)),deltaState:e})},s}();exports.WidgetBase=s,globalThis.WidgetBase=s;
},{"./app":"EVxB"}],"EmPY":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextWidget=void 0;var e=require("./app"),n=require("./widgetBase"),o=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return t(o,n),o.prototype.createElement=function(){var t=document.createElement("div");t.classList.add("reflex-text");var e=document.createElement("div");return t.appendChild(e),t},o.prototype.updateElement=function(t,n){var o=t.firstElementChild;if(void 0!==n.text&&(o.innerText=n.text),void 0!==n.multiline&&(o.style.whiteSpace=n.multiline?"normal":"nowrap"),void 0!==n.style){var r=n.style;o.style.fontFamily=r.fontName,o.style.color=(0,e.colorToCss)(r.fontColor),o.style.fontSize=r.fontSize+"em",o.style.fontStyle=r.italic?"italic":"normal",o.style.fontWeight=r.fontWeight,o.style.textDecoration=r.underlined?"underline":"none",o.style.textTransform=r.allCaps?"uppercase":"none"}},o}(n.WidgetBase);exports.TextWidget=o;
},{"./app":"EVxB","./widgetBase":"DUgK"}],"DCF0":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.RowWidget=void 0;var e=require("./app"),r=require("./widgetBase"),o=function(r){function o(){return null!==r&&r.apply(this,arguments)||this}return t(o,r),o.prototype.createElement=function(){var t=document.createElement("div");return t.classList.add("reflex-row"),t},o.prototype.updateElement=function(t,r){(0,e.replaceChildren)(t,r.children),void 0!==r.spacing&&(t.style.gap="".concat(r.spacing,"em"))},o.prototype.updateChildLayouts=function(){for(var t=[],r=!1,o=0,n=this.state.children;o<n.length;o++){var i=n[o],a=(0,e.getInstanceByWidgetId)(i);t.push(a),r=r||a.state._grow_[0]}for(var s=0,c=t;s<c.length;s++){(a=c[s]).replaceLayoutCssProperties({"flex-grow":!r||a.state._grow_[0]?"1":"0"})}},o}(r.WidgetBase);exports.RowWidget=o;
},{"./app":"EVxB","./widgetBase":"DUgK"}],"FDPZ":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColumnWidget=void 0;var e=require("./app"),r=require("./widgetBase"),o=function(r){function o(){return null!==r&&r.apply(this,arguments)||this}return t(o,r),o.prototype.createElement=function(){var t=document.createElement("div");return t.classList.add("reflex-column"),t},o.prototype.updateElement=function(t,r){(0,e.replaceChildren)(t,r.children),void 0!==r.spacing&&(t.style.gap="".concat(r.spacing,"em"))},o.prototype.updateChildLayouts=function(){for(var t=[],r=!1,o=0,n=this.state.children;o<n.length;o++){var i=n[o],a=(0,e.getInstanceByWidgetId)(i);t.push(a),r=r||a.state._grow_[1]}for(var s=0,c=t;s<c.length;s++){(a=c[s]).replaceLayoutCssProperties({"flex-grow":!r||a.state._grow_[1]?"1":"0"})}},o}(r.WidgetBase);exports.ColumnWidget=o;
},{"./app":"EVxB","./widgetBase":"DUgK"}],"aj59":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.DropdownWidget=void 0;var t=require("./widgetBase"),n=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n.prototype.createElement=function(){var e=this,t=document.createElement("select");return t.classList.add("reflex-dropdown"),t.addEventListener("input",function(){e.sendMessageToBackend({name:t.value})}),t},n.prototype.updateElement=function(e,t){if(void 0!==t.optionNames){e.innerHTML="";for(var n=0,o=t.optionNames;n<o.length;n++){var r=o[n],i=document.createElement("option");i.value=r,i.text=r,e.appendChild(i)}}void 0!==t.selectedName&&(null===t.selectedName?e.selectedIndex=-1:e.value=t.selectedName)},n}(t.WidgetBase);exports.DropdownWidget=n;
},{"./widgetBase":"DUgK"}],"u1gD":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.RectangleWidget=void 0;var e=require("./app"),r=require("./widgetBase");function o(t,r,o,s){if(void 0!==r){var n={};null===r?n={background:"transparent","stroke-color":"transparent","stroke-width":"0em","corner-radius-top-left":"0em","corner-radius-top-right":"0em","corner-radius-bottom-right":"0em","corner-radius-bottom-left":"0em","shadow-color":"transparent","shadow-radius":"0em","shadow-offset-x":"0em","shadow-offset-y":"0em"}:(n.background=(0,e.fillToCss)(r.fill),n["stroke-color"]=(0,e.colorToCss)(r.strokeColor),n["stroke-width"]="".concat(r.strokeWidth,"em"),n["corner-radius-top-left"]="".concat(r.cornerRadius[0],"em"),n["corner-radius-top-right"]="".concat(r.cornerRadius[1],"em"),n["corner-radius-bottom-right"]="".concat(r.cornerRadius[2],"em"),n["corner-radius-bottom-left"]="".concat(r.cornerRadius[3],"em"),n["shadow-color"]=(0,e.colorToCss)(r.shadowColor),n["shadow-radius"]="".concat(r.shadowRadius,"em"),n["shadow-offset-x"]="".concat(r.shadowOffset[0],"em"),n["shadow-offset-y"]="".concat(r.shadowOffset[1],"em"));for(var a=0,c=Object.entries(n);a<c.length;a++){var i=c[a],l=i[0],d=i[1];t.style.setProperty("--".concat(o).concat(l).concat(s),d)}}}var s=function(r){function s(){return null!==r&&r.apply(this,arguments)||this}return t(s,r),s.prototype.createElement=function(){var t=document.createElement("div");return t.classList.add("reflex-rectangle"),t.classList.add("reflex-single-container"),t},s.prototype.updateElement=function(t,r){(0,e.replaceOnlyChild)(t,r.child),o(t,r.style,"rectangle-",""),void 0!==r.transition_time&&(t.style.transitionDuration="".concat(r.transition_time,"s")),null===r.hover_style?t.classList.remove("reflex-rectangle-hover"):void 0!==r.hover_style&&(t.classList.add("reflex-rectangle-hover"),o(t,r.hover_style,"rectangle-","-hover")),void 0!==r.cursor&&("default"===r.cursor?t.style.removeProperty("cursor"):t.style.cursor=r.cursor)},s.prototype.updateChildLayouts=function(){var t=this.state.child;null!=t&&(0,e.getInstanceByWidgetId)(t).replaceLayoutCssProperties({})},s}(r.WidgetBase);exports.RectangleWidget=s;
},{"./app":"EVxB","./widgetBase":"DUgK"}],"E2Q9":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.StackWidget=void 0;var e=require("./app"),r=require("./widgetBase"),n=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return t(n,r),n.prototype.createElement=function(){var t=document.createElement("div");return t.classList.add("reflex-stack"),t},n.prototype.updateElement=function(t,r){if(void 0!==r.children){(0,e.replaceChildren)(t,r.children);for(var n=0,o=0,i=t.children;o<i.length;o++){i[o].style.zIndex="".concat(n),n+=1}}},n}(r.WidgetBase);exports.StackWidget=n;
},{"./app":"EVxB","./widgetBase":"DUgK"}],"K1Om":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),t=this&&this.__assign||function(){return(t=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.MouseEventListenerWidget=void 0;var n=require("./app"),o=require("./widgetBase");function r(e){return{button:["left","middle","right"][e.button]}}function s(e){return{x:e.clientX/n.pixelsPerEm,y:e.clientY/n.pixelsPerEm}}var u=function(o){function u(){return null!==o&&o.apply(this,arguments)||this}return e(u,o),u.prototype.createElement=function(){var e=document.createElement("div");return e.classList.add("reflex-single-container"),e},u.prototype.updateElement=function(e,o){var u=this;(0,n.replaceOnlyChild)(e,o.child),o.reportMouseDown?e.onmousedown=function(e){u.sendMessageToBackend(t(t({type:"mouseDown"},r(e)),s(e)))}:e.onmousedown=null,o.reportMouseUp?e.onmouseup=function(e){u.sendMessageToBackend(t(t({type:"mouseUp"},r(e)),s(e)))}:e.onmouseup=null,o.reportMouseMove?e.onmousemove=function(e){u.sendMessageToBackend(t({type:"mouseMove"},s(e)))}:e.onmousemove=null,o.reportMouseEnter?e.onmouseenter=function(e){u.sendMessageToBackend(t({type:"mouseEnter"},s(e)))}:e.onmouseenter=null,o.reportMouseLeave?e.onmouseleave=function(e){u.sendMessageToBackend(t({type:"mouseLeave"},s(e)))}:e.onmouseleave=null},u.prototype.updateChildLayouts=function(){(0,n.getInstanceByWidgetId)(this.state.child).replaceLayoutCssProperties({})},u}(o.WidgetBase);exports.MouseEventListenerWidget=u;
},{"./app":"EVxB","./widgetBase":"DUgK"}],"g2Fb":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextInputWidget=void 0;var e=require("./widgetBase"),n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype.createElement=function(){var t=this,e=document.createElement("input");return e.classList.add("reflex-text-input"),e.addEventListener("blur",function(){t.setStateAndNotifyBackend({text:e.value})}),e.addEventListener("keydown",function(n){"Enter"===n.key&&t.sendMessageToBackend({text:e.value})}),e},n.prototype.updateElement=function(t,e){var n=t;void 0!==e.secret&&(n.type=e.secret?"password":"text"),void 0!==e.text&&(n.value=e.text),void 0!==e.placeholder&&(n.placeholder=e.placeholder)},n}(e.WidgetBase);exports.TextInputWidget=n;
},{"./widgetBase":"DUgK"}],"When":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.PlaceholderWidget=void 0;var e=require("./app"),r=require("./widgetBase"),o=function(r){function o(){return null!==r&&r.apply(this,arguments)||this}return t(o,r),o.prototype.createElement=function(){var t=document.createElement("div");return t.classList.add("reflex-single-container"),t},o.prototype.updateElement=function(t,r){(0,e.replaceOnlyChild)(t,r._child_)},o.prototype.updateChildLayouts=function(){(0,e.getInstanceByWidgetId)(this.state._child_).replaceLayoutCssProperties({})},o}(r.WidgetBase);exports.PlaceholderWidget=o;
},{"./app":"EVxB","./widgetBase":"DUgK"}],"RrmF":[function(require,module,exports) {
"use strict";var o=this&&this.__extends||function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e])})(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.SwitchWidget=void 0;var t=require("./app"),e=require("./widgetBase"),n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return o(n,e),n.prototype.createElement=function(){var o=this,t=document.createElement("div");t.classList.add("reflex-switch");var e=document.createElement("div");e.classList.add("container"),t.appendChild(e);var n=document.createElement("input");n.type="checkbox",e.appendChild(n);var r=document.createElement("div");return r.classList.add("knob"),e.appendChild(r),n.addEventListener("change",function(){o.setStateAndNotifyBackend({is_on:n.checked})}),t},n.prototype.updateElement=function(o,e){if(void 0!==e.is_on){e.is_on?o.classList.add("is-on"):o.classList.remove("is-on");var n=o.querySelector("input");(null==n?void 0:n.checked)!==e.is_on&&(n.checked=e.is_on)}void 0!==e.knobColorOff&&o.style.setProperty("--switch-knob-color-off",(0,t.colorToCss)(e.knobColorOff)),void 0!==e.knobColorOn&&o.style.setProperty("--switch-knob-color-on",(0,t.colorToCss)(e.knobColorOn)),void 0!==e.backgroundColorOff&&o.style.setProperty("--switch-background-color-off",(0,t.colorToCss)(e.backgroundColorOff)),void 0!==e.backgroundColorOn&&o.style.setProperty("--switch-background-color-on",(0,t.colorToCss)(e.backgroundColorOn))},n}(e.WidgetBase);exports.SwitchWidget=n;
},{"./app":"EVxB","./widgetBase":"DUgK"}],"grfb":[function(require,module,exports) {
"use strict";var r=this&&this.__extends||function(){var r=function(e,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function t(){this.constructor=e}r(e,o),e.prototype=null===o?Object.create(o):(t.prototype=o.prototype,new t)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.ProgressCircleWidget=void 0;var e=require("./app"),o=require("./widgetBase"),t=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return r(t,o),t.prototype.createElement=function(){var r=document.createElement("div");return r.innerHTML='\n            <svg viewBox="25 25 50 50">\n                <circle class="background" cx="50" cy="50" r="20"></circle>\n                <circle class="progress" cx="50" cy="50" r="20"></circle>\n            </svg>\n        ',r.classList.add("reflex-progress-circle"),r},t.prototype.updateElement=function(r,o){if(void 0!==o.color&&(r.style.stroke=(0,e.colorToCss)(o.color)),void 0!==o.background_color&&r.style.setProperty("--background-color",(0,e.colorToCss)(o.background_color)),void 0!==o.progress)if(null===o.progress)r.classList.add("spinning");else{r.classList.remove("spinning");var t=40*Math.PI;r.style.setProperty("--dasharray","".concat(o.progress*t,", ").concat((1-o.progress)*t))}},t}(o.WidgetBase);exports.ProgressCircleWidget=t;
},{"./app":"EVxB","./widgetBase":"DUgK"}],"NWKb":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.PlotWidget=void 0;var e=require("./widgetBase");function o(t){if("undefined"==typeof Plotly){console.log("Fetching plotly.js");var e=document.createElement("script");e.src="/reflex/asset/plotly.min.js",e.onload=t,document.head.appendChild(e)}else t()}var n=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype.createElement=function(){var t=document.createElement("div");return t.style.display="inline-block",t},n.prototype.updateElement=function(t,e){void 0!==e.plotJson&&(t.innerHTML="",o(function(){var o=JSON.parse(e.plotJson);Plotly.newPlot(t,o.data,o.layout,{responsive:!0})}))},n}(e.WidgetBase);exports.PlotWidget=n;
},{"./widgetBase":"DUgK"}],"cKKU":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.AlignWidget=void 0;var e=require("./app"),n=require("./widgetBase"),o=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return t(o,n),o.prototype.createElement=function(){var t=document.createElement("div");return t.classList.add("reflex-align"),t},o.prototype.updateElement=function(t,n){(0,e.replaceOnlyChild)(t,n.child)},o.prototype.updateChildLayouts=function(){var t,n,o=this.state.align_x,r=this.state.align_y,i={};null===o?(i.width="100%",t=0):(i.width="max-content",i.left="".concat(100*o,"%"),t=-100*o),null===r?(i.height="100%",n=0):(i.height="max-content",i.top="".concat(100*r,"%"),n=-100*r),0===t&&0===n||(i.transform="translate(".concat(t,"%, ").concat(n,"%)")),(0,e.getInstanceByWidgetId)(this.state.child).replaceLayoutCssProperties(i)},o}(n.WidgetBase);exports.AlignWidget=o;
},{"./app":"EVxB","./widgetBase":"DUgK"}],"JoLr":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.MarginWidget=void 0;var e=require("./app"),n=require("./widgetBase"),r=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return t(r,n),r.prototype.createElement=function(){var t=document.createElement("div");return t.classList.add("reflex-margin"),t.classList.add("reflex-single-container"),t},r.prototype.updateElement=function(t,n){(0,e.replaceOnlyChild)(t,n.child),void 0!==n.margin_left&&(t.style.paddingLeft="".concat(n.margin_left,"em")),void 0!==n.margin_top&&(t.style.paddingTop="".concat(n.margin_top,"em")),void 0!==n.margin_right&&(t.style.paddingRight="".concat(n.margin_right,"em")),void 0!==n.margin_bottom&&(t.style.paddingBottom="".concat(n.margin_bottom,"em"))},r.prototype.updateChildLayouts=function(){(0,e.getInstanceByWidgetId)(this.state.child).replaceLayoutCssProperties({})},r}(n.WidgetBase);exports.MarginWidget=r;
},{"./app":"EVxB","./widgetBase":"DUgK"}],"K4kD":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(e,o)};return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.MediaPlayerWidget=void 0;var e=require("./widgetBase"),o=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return t(o,e),o.prototype.createElement=function(){return document.createElement("video")},o.prototype.updateElement=function(t,e){void 0!==e.media&&(t.src=e.media),void 0!==e.loop&&(t.loop=e.loop),void 0!==e.autoplay&&(t.autoplay=e.autoplay),void 0!==e.controls&&(t.controls=e.controls),void 0!==e.muted&&(t.muted=e.muted),void 0!==e.volume&&(t.volume=e.volume)},o}(e.WidgetBase);exports.MediaPlayerWidget=o;
},{"./widgetBase":"DUgK"}],"EVxB":[function(require,module,exports) {
"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.sendMessageOverWebsocket=exports.replaceChildren=exports.replaceOnlyChild=exports.getParentWidgetElementExcludingInjected=exports.getParentWidgetElementIncludingInjected=exports.getInstanceByWidgetId=exports.getElementByWidgetId=exports.fillToCss=exports.colorToCss=exports.pixelsPerEm=void 0;var text_1=require("./text"),row_1=require("./row"),column_1=require("./column"),dropdown_1=require("./dropdown"),rectangle_1=require("./rectangle"),stack_1=require("./stack"),mouseEventListener_1=require("./mouseEventListener"),textInput_1=require("./textInput"),placeholder_1=require("./placeholder"),switch_1=require("./switch"),progressCircle_1=require("./progressCircle"),plot_1=require("./plot"),align_1=require("./align"),margin_1=require("./margin"),mediaPlayer_1=require("./mediaPlayer"),sessionToken="{session_token}",initialMessages="{initial_messages}",CHILD_ATTRIBUTE_NAMES={},socket=null;exports.pixelsPerEm=16;var elementsToInstances=new WeakMap;function colorToCss(e){var t=e[0],n=e[1],i=e[2],o=e[3];return"rgba(".concat(255*t,", ").concat(255*n,", ").concat(255*i,", ").concat(o,")")}function fillToCss(e){if("solid"===e.type)return colorToCss(e.color);if("linearGradient"===e.type){if(1==e.stops.length)return colorToCss(e.stops[0][0]);for(var t=[],n=0;n<e.stops.length;n++){var i=e.stops[n][0],o=e.stops[n][1];t.push("".concat(colorToCss(i)," ").concat(100*o,"%"))}return"linear-gradient(".concat(e.angleDegrees,"deg, ").concat(t.join(", "),")")}if("image"===e.type){var r="url('".concat(e.imageUrl,"')");if("fit"==e.fillMode)return"".concat(r," center/contain no-repeat");if("stretch"==e.fillMode)return"".concat(r," top left / 100% 100%");if("tile"==e.fillMode)return"".concat(r," left top repeat");if("zoom"==e.fillMode)return"".concat(r," center/cover no-repeat");throw"Invalid fill mode for image fill: ".concat(e.type)}throw"Invalid fill type: ".concat(e.type)}function getElementByWidgetId(e){var t=document.getElementById("reflex-id-".concat(e));if(null===t)throw"Could not find widget with id ".concat(e);return t}function getInstanceByWidgetId(e){var t=getElementByWidgetId(e),n=elementsToInstances.get(t);if(void 0===n)throw"Could not find widget with id ".concat(e);return n}function getParentWidgetElementIncludingInjected(e){for(var t=e.parentElement;null!==t;){if(t.id.startsWith("reflex-id-"))return t;t=t.parentElement}return null}function getParentWidgetElementExcludingInjected(e){for(var t=e;;){if(null===(t=getParentWidgetElementIncludingInjected(t)))return null;if(t.id.match(/reflex-id-\d+$/))return t}}exports.colorToCss=colorToCss,exports.fillToCss=fillToCss,exports.getElementByWidgetId=getElementByWidgetId,exports.getInstanceByWidgetId=getInstanceByWidgetId,exports.getParentWidgetElementIncludingInjected=getParentWidgetElementIncludingInjected,exports.getParentWidgetElementExcludingInjected=getParentWidgetElementExcludingInjected;var widgetClasses={"Align-builtin":align_1.AlignWidget,"Column-builtin":column_1.ColumnWidget,"Dropdown-builtin":dropdown_1.DropdownWidget,"Margin-builtin":margin_1.MarginWidget,"MediaPlayer-builtin":mediaPlayer_1.MediaPlayerWidget,"MouseEventListener-builtin":mouseEventListener_1.MouseEventListenerWidget,"Plot-builtin":plot_1.PlotWidget,"ProgressCircle-builtin":progressCircle_1.ProgressCircleWidget,"Rectangle-builtin":rectangle_1.RectangleWidget,"Row-builtin":row_1.RowWidget,"Stack-builtin":stack_1.StackWidget,"Switch-builtin":switch_1.SwitchWidget,"Text-builtin":text_1.TextWidget,"TextInput-builtin":textInput_1.TextInputWidget,Placeholder:placeholder_1.PlaceholderWidget};function processMessage(message){if(console.log("Received message: ",message),"updateWidgetStates"==message.type)updateWidgetStates(message.deltaStates,message.rootWidgetId);else if("evaluateJavascript"==message.type)eval(message.javascriptSource);else{if("requestFileUpload"!=message.type)throw"Encountered unknown message type: ".concat(message);requestFileUpload(message)}}function getCurrentWidgetState(e,t){var n=document.getElementById("reflex-id-".concat(e));if(null===n)return t;var i=elementsToInstances.get(n);return void 0===i?t:__assign(__assign({},i.state),t)}function createLayoutWidgetStates(e,t,n){var i=getCurrentWidgetState(e,t),o=e,r=i._margin_;if(0!==r[0]||0!==r[1]||0!==r[2]||0!==r[3]){var s="".concat(e,"-margin");n[s]={_type_:"Margin-builtin",_python_type_:"Margin (injected)",_size_:i._size_,_grow_:i._grow_,child:o,margin_left:r[0],margin_top:r[1],margin_right:r[2],margin_bottom:r[3]},o=s}var l=i._align_;if(null!==l[0]||null!==l[1]){var a="".concat(e,"-align");n[a]={_type_:"Align-builtin",_python_type_:"Align (injected)",_size_:i._size_,_grow_:i._grow_,child:o,align_x:l[0],align_y:l[1]},o=a}return o}function replaceChildrenWithLayoutWidgets(e,t,n){function i(e){return e.split("-")[0]}for(var o=0,r=CHILD_ATTRIBUTE_NAMES[e._type_]||[];o<r.length;o++){var s=r[o],l=e[s];if(Array.isArray(l))e[s]=l.map(function(e){return e=i(e.toString()),t.add(e),createLayoutWidgetStates(e,n[e]||{},n)});else if(null!==l){var a=i(l.toString());e[s]=createLayoutWidgetStates(a,n[a]||{},n),t.add(a)}}}function preprocessMessage(e,t){"number"==typeof t&&(t=t.toString());for(var n=Object.keys(e),i=new Set,o=0,r=n;o<r.length;o++){replaceChildrenWithLayoutWidgets(e[a=r[o]],i,e)}for(var s=0,l=n;s<l.length;s++){var a=l[s];if(i.has(a))console.log("Discarding ".concat(a," because it is a child"));else if(a!==t){var d=document.getElementById("reflex-id-".concat(a));if(null!==d){var c=getParentWidgetElementExcludingInjected(d);if(null!==c){var g=elementsToInstances.get(c);if(void 0===g)throw"Parent widget with id ".concat(c," not found");var u=c.id.slice("reflex-id-".length),p=__assign({},g.state);replaceChildrenWithLayoutWidgets(p,i,e),e[u]=p,console.log("Parent of ".concat(a," is ").concat(u))}else console.log("Discarding ".concat(a," because it has no parent"))}else console.log("Discarding ".concat(a," because it is not in the DOM"))}else t=createLayoutWidgetStates(a,e[a],e)}return t}function updateWidgetStates(e,t){t=preprocessMessage(e,t),console.log(e);var n=document.createElement("div");for(var i in document.body.appendChild(n),n.id="reflex-latent-widgets",n.style.display="none",e){var o=e[i],r="reflex-id-".concat(i);if(!(c=document.getElementById(r))){var s=widgetClasses[o._type_];if(!s)throw"Encountered unknown widget type: ".concat(o._type_);(c=(g=new s(r,o)).createElement()).id=r,c.classList.add("reflex-widget"),c.setAttribute("dbg-py-class",o._python_type_);var l=o.key;void 0!==l&&c.setAttribute("dbg-key","".concat(l)),elementsToInstances.set(c,g),n.appendChild(c)}}var a=new Set;for(var d in e){var c,g;o=e[d];commonUpdate(c=getElementByWidgetId(d),o),(g=elementsToInstances.get(c)).updateElement(c,o),g.state=__assign(__assign({},g.state),o),a.add(g);var u=getParentWidgetElementIncludingInjected(c);if(u){var p=elementsToInstances.get(u);if(!p)throw"Failed to find parent widget for ".concat(d);a.add(p)}}if(a.forEach(function(e){e.updateChildLayouts()}),null!==t){var m=getElementByWidgetId(t);document.body.innerHTML="",document.body.appendChild(m)}n.remove()}function commonUpdate(e,t){void 0!==t._size_&&(null===t._size_[0]?e.style.removeProperty("min-width"):e.style.minWidth="".concat(t._size_[0],"em"),null===t._size_[1]?e.style.removeProperty("min-height"):e.style.minHeight="".concat(t._size_[1],"em"))}function replaceOnlyChild(e,t){if(void 0!==t)if(null!==t){var n=e.firstElementChild;if(null!==n){if(n.id==="reflex-id-".concat(t))return;var i=document.getElementById("reflex-latent-widgets");null==i||i.appendChild(n)}var o=getElementByWidgetId(t);null==e||e.appendChild(o)}else e.innerHTML=""}function replaceChildren(e,t){if(void 0!==t)for(var n=document.getElementById("reflex-latent-widgets"),i=e.firstElementChild,o=0;;){if(null===i){for(;o<t.length;){var r=getElementByWidgetId(t[o]);e.appendChild(r),o++}break}if(o>=t.length){for(;null!==i;){var s=i.nextElementSibling;n.appendChild(i),i=s}break}var l=t[o];if(i.id!=="reflex-id-".concat(l)){var a=getElementByWidgetId(l);e.insertBefore(a,i),o++}else i=i.nextElementSibling,o++}}function requestFileUpload(e){var t=document.createElement("input");function n(){if(null!==t.parentElement){for(var n=new FormData,i=0,o=t.files||[];i<o.length;i++){var r=o[i];1,n.append("file_names",r.name),n.append("file_types",r.type),n.append("file_sizes",r.size.toString()),n.append("file_streams",r,r.name)}n.append("dummy","dummy"),fetch(e.uploadUrl,{method:"PUT",body:n}),t.remove()}}t.type="file",t.multiple=e.multiple,null!==e.fileExtensions&&(t.accept=e.fileExtensions.join(",")),t.style.display="none",t.addEventListener("change",n),window.addEventListener("focus",function(){this.window.setTimeout(n,500)},{once:!0}),document.body.appendChild(t),t.click()}function main(){var e=document.createElement("div");e.style.height="10em",document.body.appendChild(e),exports.pixelsPerEm=e.offsetHeight/10,document.body.removeChild(e),console.log("Processing ".concat(initialMessages.length," initial message(s)"));for(var t=0,n=initialMessages;t<n.length;t++){processMessage(n[t])}var i=new URL("/reflex/ws?sessionToken=".concat(sessionToken),window.location.href);i.protocol=i.protocol.replace("http","ws"),console.log("Connecting websocket to ".concat(i.href)),(socket=new WebSocket(i.href)).addEventListener("open",onOpen),socket.addEventListener("message",onMessage),socket.addEventListener("error",onError),socket.addEventListener("close",onClose)}function onOpen(){console.log("Connection opened")}function onMessage(e){processMessage(JSON.parse(e.data))}function onError(e){console.log("Error: ".concat(e.message))}function onClose(e){console.log("Connection closed: ".concat(e.reason))}function sendMessageOverWebsocket(e){socket?(console.log("Sending message: ",e),socket.send(JSON.stringify(e))):console.log("Attempted to send message, but the websocket is not connected: ".concat(e))}globalThis.widgetClasses=widgetClasses,exports.replaceOnlyChild=replaceOnlyChild,exports.replaceChildren=replaceChildren,exports.sendMessageOverWebsocket=sendMessageOverWebsocket,main();
},{"./text":"EmPY","./row":"DCF0","./column":"FDPZ","./dropdown":"aj59","./rectangle":"u1gD","./stack":"E2Q9","./mouseEventListener":"K1Om","./textInput":"g2Fb","./placeholder":"When","./switch":"RrmF","./progressCircle":"grfb","./plot":"NWKb","./align":"cKKU","./margin":"JoLr","./mediaPlayer":"K4kD"}]},{},["EVxB"], null)
//# sourceMappingURL=/app.js.map